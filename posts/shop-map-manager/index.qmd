---
title: "Shop Map Manager (店铺地图管理系统)"
author: "Tony D"
date: "2025-11-05"
categories: [AI, API, map]
image: "images/0.png"

format:
  html:
    code-fold: true
    code-tools: true
    
execute:
  eval: false
  warning: false
---

A map-based shop management application built with Streamlit and Folium, allowing users to manage shop data in a CSV file and visualize them on an interactive map with Gaode (Amap) tiles.

## Live Demo

<https://chinamap.streamlit.app/>

## Screenshot

![Dashboard Overview](images/1.png)

## Features

- **Shop Search & Addition**: Integration with the Gaode Map API to search for shops by name or keyword and automatically add them to your personal list.
- **Interactive Map Visualization**:
  - Displays all saved shop locations on an interactive map.
  - Custom markers with category-specific icons.
  - Color-coded markers based on visit status (red for "Visited", green for "Want to Visit").
- **Data Management**:
  - Editable table view for managing shop information.
  - Auto-save to CSV file.
  - Track visit status, ratings, and personal notes.
- **Categorization**: Organize shops by type (餐饮, 零售, 服务, 娱乐, 教育, 医疗, 风景名胜, etc.).
- **Visit Tracking**: Distinguish between shops you've visited and those you want to visit.
- **Personal Notes & Ratings**: Record experiences, notes, and star ratings (1-5) for visited locations.

## Tech Stack

- **Frontend**: Streamlit
- **Mapping**: Folium with streamlit-folium
- **Data**: Pandas
- **API**: Gaode Map API (高德地图API)

## Installation

1.  Clone this repository:

    ```bash
    git clone <repository-url>
    cd map_app
    ```

2.  Install dependencies:

    ```bash
    pip install -r requirements.txt
    ```

3.  Set up environment variables: Create a `.env` file in the project root and add your Gaode API key:

    ```bash
    GAODE_API_KEY=your_api_key_here
    ```

    To get a Gaode API key, visit: <https://console.amap.com/dev/key/app>

## Usage

Run the application:

```bash
streamlit run app.py
```

The app will open in your browser at `http://localhost:8501`

### Adding Shops

1.  Use the sidebar search to find shops by name.
2.  Click "Add to List" (添加到列表) on any search result.

### Managing Data

1.  Switch to the "Data Table" (数据表格) tab.
2.  Edit shop details, visit status, ratings, and notes.
3.  Changes are auto-saved to `shops_data.csv`.

### Viewing on Map

1.  Switch to the "Map View" (地图视图) tab.
2.  Click on markers to see shop details.

## Data Storage

Shop data is stored in `shops_data.csv` with the following columns:

| Column | Description |
|---|---|
| `shop_name` | Shop name |
| `city` | City name |
| `address` | Full address |
| `latitude` | Latitude coordinate |
| `longitude` | Longitude coordinate |
| `shop_type` | Shop category |
| `visit_status` | "Want to Visit" or "Visited" |
| `notes` | Personal notes |
| `rating` | Star rating (0-5) |

## Project Structure

```text
map_app/
├── app.py              # Main Streamlit application
├── map_utils.py        # Gaode API integration
├── requirements.txt    # Python dependencies
├── shops_data.csv      # Data storage (auto-created)
├── static/
│   └── style.css       # Custom styles
└── README.md           # Main documentation
```

## Dependencies

- `streamlit` - Web application framework
- `folium` - Map visualization
- `streamlit-folium` - Streamlit-Folium integration
- `pandas` - Data manipulation
- `python-dotenv` - Environment variable management
- `requests` - HTTP client for API calls

## Conclusion

This Shop Map Manager provides a simple yet effective way to track and visualize your favorite locations. By leveraging Streamlit for the UI and Gaode Maps for data, it bridges the gap between static lists and interactive exploration.